<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Second Brain</title>
    <link rel="icon" type="image/svg+xml" href="assets/favicon.svg" />
    <!-- Markdown Parser -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

    <!-- Fuse.js (Search Engine) -->
    <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>

    <link rel="stylesheet" href="css/style.css" />

    <!-- Tailwind CSS (CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: ['class', '[data-theme="dark"]'],
            theme: {
                extend: {
                    colors: {
                        // Mapping Tailwind color names to our CSS Variables
                        // Usage: class="text-accent" or "bg-card"
                        primary: 'var(--text-primary)',
                        secondary: 'var(--text-secondary)',
                        accent: 'var(--text-accent)',
                        card: 'var(--bg-card)',
                        sidebar: 'var(--bg-sidebar)',
                        body: 'var(--bg-body)',
                        border: 'var(--border-color)'
                    }
                }
            }
        }
    </script>
</head>

<body>
    <!-- Mobile Menu Button -->
    <!-- Mobile Header -->
    <header class="mobile-header">
        <button class="header-btn" onclick="toggleSidebar()" aria-label="Menu">
            <i class="fas fa-bars"></i>
        </button>
        <div class="mobile-brand">Second Brain</div>
        <button class="header-btn" onclick="toggleMobileSearch()" aria-label="Search">
            <i class="fas fa-search"></i>
        </button>
    </header>

    <!-- Sidebar Backdrop -->
    <div class="sidebar-backdrop" id="sidebarBackdrop" onclick="toggleSidebar()"></div>

    <!-- Mobile Search Overlay -->
    <div class="mobile-search-overlay" id="mobileSearchOverlay">
        <div class="mobile-search-bar">
            <i class="fas fa-search"></i>
            <input type="text" id="mobileSearchInput" placeholder="Search docs..."
                onkeyup="handleMobileSearch(this.value)" />
            <button class="close-search-btn" onclick="toggleMobileSearch()">
                Cancel
            </button>
        </div>
        <div class="mobile-search-results" id="mobileSearchResults">
            <!-- Results go here -->
        </div>
    </div>

    <!-- Sidebar -->
    <nav class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="brand">
                <i class="fas fa-layer-group" style="color: var(--text-accent)"></i>
                Second Brain
            </div>
            <button class="theme-toggle" id="themeToggle" type="button" aria-label="Toggle dark mode"
                title="Toggle dark mode">
                <i class="fas fa-moon"></i>
                <i class="fas fa-sun"></i>
            </button>
            <div class="search-box">
                <i class="fas fa-search search-icon"></i>
                <input type="text" class="search-input" placeholder="Search..." onkeyup="filterDocs(this.value)" />
            </div>
        </div>

        <div class="nav-tree" id="navTree">
            <!-- Navigation items injected here -->
        </div>
        <div class="sidebar-footer">
            <a href="https://github.com/Asifdotexe/second-brain/issues/new?labels=bug&title=[Bug]%20" target="_blank"
                class="footer-link" title="Report a bug">
                <i class="fas fa-bug"></i> Report Bug
            </a>
            <a href="https://github.com/Asifdotexe/second-brain/issues/new?labels=enhancement&title=[Note]%20"
                target="_blank" class="footer-link" title="Request a new note">
                <i class="fas fa-lightbulb"></i> Request Note
            </a>
        </div>
    </nav>

    <!-- Main Content Area -->
    <main class="main-content">
        <div id="breadcrumbs" class="breadcrumbs"></div>
        <div id="contentDisplay" class="markdown-body">
            <!-- Content rendered here -->
        </div>
    </main>

    <script src="js/data.js"></script>
    <script src="js/app.js"></script>
</body>

</html>